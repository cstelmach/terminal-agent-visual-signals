#!/bin/bash
# ==============================================================================
# TAVS - Terminal Agent Visual Signals â€” User Configuration (v3)
# ==============================================================================
# Quick config:  tavs set <key> <value>     (e.g., tavs set theme nord)
# Full wizard:   tavs wizard                (interactive 7-step setup)
# See current:   tavs status                (visual summary with color preview)
# Validate:      tavs config validate       (check for errors)
#
# How it works:
#   - Uncomment and modify settings you want to override
#   - Global settings affect all agents
#   - Use AGENT_ prefix (CLAUDE_, GEMINI_, etc.) for per-agent overrides
#   - Leave settings commented to use defaults from defaults.conf
#
# Quick disable (without editing): TAVS_STATUS=false claude
# ==============================================================================


# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘  SECTION 1: ESSENTIAL SETTINGS                                           â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Operating Mode: "static", "dynamic", or "preset"
#   static  - Fixed colors from defaults.conf
#   dynamic - Query terminal for current background, compute colors dynamically
#   preset  - Use a named theme from src/themes/ (recommended)
# THEME_MODE="static"

# Theme preset (when THEME_MODE="preset")
#   catppuccin-frappe, catppuccin-latte, catppuccin-macchiato, catppuccin-mocha,
#   nord, dracula, solarized-dark, solarized-light, tokyo-night
# THEME_PRESET=""

# Light/Dark Mode
#   ENABLE_LIGHT_DARK_SWITCHING: Auto-detect system appearance
#     "false" (default) - Always use dark backgrounds
#     "true"  - Switch based on system appearance
#   FORCE_MODE: Explicit override (takes priority over auto-detection)
#     "auto" (default), "dark", or "light"
# ENABLE_LIGHT_DARK_SWITCHING="false"
# FORCE_MODE="auto"


# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘  SECTION 2: VISUAL FEATURES                                              â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# ASCII Faces (Anthropomorphising) â€” face expressions in terminal titles
# ENABLE_ANTHROPOMORPHISING="true"
# FACE_POSITION="before"    # "before" or "after" the title text

# Face Mode â€” standard text eyes or compact emoji eyes
#   "standard" (default) - Text eyes: Æ[â€¢ â€¢]E ğŸŸ  +2 ğŸ¦Š ~/proj
#   "compact"  - Emoji eyes: Æ[ğŸŸ§ +2]E ğŸ¦Š ~/proj (more info-dense)
# TAVS_FACE_MODE="standard"
# TAVS_COMPACT_THEME="semantic"    # semantic, circles, squares, mixed

# Stylish Backgrounds (Images) â€” iTerm2 and Kitty only
# ENABLE_STYLISH_BACKGROUNDS="false"
# STYLISH_BACKGROUNDS_DIR="$HOME/.tavs/backgrounds"

# Palette Theming (OSC 4) â€” modify terminal's 16-color ANSI palette
#   "false" (default) - Background colors only
#   "auto"  - Enable when NOT in TrueColor mode
#   "true"  - Always apply palette (affects shell tools, ls colors, etc.)
# ENABLE_PALETTE_THEMING="false"

# Status Icons â€” emoji shown per state in titles
# STATUS_ICON_PROCESSING="ğŸŸ "
# STATUS_ICON_PERMISSION="ğŸ”´"
# STATUS_ICON_COMPLETE="ğŸŸ¢"
# STATUS_ICON_IDLE="ğŸŸ£"
# STATUS_ICON_COMPACTING="ğŸ”„"
# STATUS_ICON_SUBAGENT="ğŸ”€"
# STATUS_ICON_TOOL_ERROR="âŒ"


# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘  SECTION 3: TITLE SYSTEM                                                 â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Title Mode â€” how TAVS handles terminal tab titles
#   "skip-processing" (default) - Let Claude Code handle processing, TAVS handles others
#   "prefix-only" - Add face+status prefix, preserve your tab names
#   "full"   - TAVS owns all titles with animated spinner eyes
#   "off"    - No title changes, only background colors/images
#
# For "full" mode, add to ~/.claude/settings.json:
#   "env": { "CLAUDE_CODE_DISABLE_TERMINAL_TITLE": "1" }
# TAVS_TITLE_MODE="skip-processing"

# Title Fallback â€” when no user-set tab name exists
#   "path"         (default) - Current directory: ~/projects
#   "session-path" - Session ID + path: 134eed79 ~/projects
#   "path-session" - Path + session ID: ~/projects 134eed79
#   "session"      - Session ID only: 134eed79
# TAVS_TITLE_FALLBACK="path"

# Title Format â€” customize composition template
#   {FACE}         Agent face expression (Æ[â€¢ â€¢]E)
#   {STATUS_ICON}  State emoji (ğŸŸ )
#   {AGENTS}       Subagent count (+2) â€” empty when none
#   {SESSION_ICON} Unique animal emoji per tab (ğŸ¦Š)
#   {BASE}         Base title (your tab name or fallback)
# TAVS_TITLE_FORMAT="{FACE} {STATUS_ICON} {AGENTS} {SESSION_ICON} {BASE}"

# Subagent count format â€” {N} = count number
# TAVS_AGENTS_FORMAT="+{N}"

# Session Icons â€” unique animal emoji per terminal tab
# ENABLE_SESSION_ICONS="true"
# Custom icon pool (override the default ~25 animals):
# TAVS_SESSION_ICONS=("ğŸ¦„" "ğŸ²" "ğŸ¦ˆ" "ğŸ‹" "ğŸ ")


# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘  SECTION 4: SPINNER (when TAVS_TITLE_MODE="full")                       â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Spinner Style â€” animation pattern for eyes during processing
#   "braille"     - Rotating dots: â ‹ â ™ â ¹ â ¸
#   "circle"      - Filling circles: â—‹ â—” â—‘ â—• â—
#   "block"       - Pulsing bars: â– â–‚ â–ƒ â–„ â–… â–† â–‡ â–ˆ
#   "eye-animate" - Random eye characters
#   "none"        - Use existing face variants (no animation)
#   "random"      - Random selection per session (recommended)
# TAVS_SPINNER_STYLE="random"

# Eye Synchronization Mode â€” how the two eyes animate together
#   "sync"      - Both eyes same frame
#   "opposite"  - Eyes half-cycle apart
#   "stagger"   - Left leads, right follows
#   "clockwise" - Both rotate clockwise (braille)
#   "counter"   - Both rotate counter-clockwise
#   "mirror"    - Left increases, right decreases
#   "mirror_inv"- Left decreases, right increases
#   "random"    - Random per session (recommended)
# TAVS_SPINNER_EYE_MODE="random"

# Session Identity â€” consistent visual identity per session
#   When true, random selections are made once at session start
# TAVS_SESSION_IDENTITY="true"

# Custom spinner frames (override defaults)
# TAVS_SPINNER_FRAMES_BRAILLE=("â ‹" "â ™" "â ¹" "â ¸" "â ¼" "â ´" "â ¦" "â §" "â ‡" "â ")
# TAVS_SPINNER_FRAMES_CIRCLE=("â—‹" "â—”" "â—‘" "â—•" "â—" "â—•" "â—‘" "â—”")
# TAVS_SPINNER_FRAMES_BLOCK=("â–" "â–‚" "â–ƒ" "â–„" "â–…" "â–†" "â–‡" "â–ˆ" "â–‡" "â–†" "â–…" "â–„" "â–ƒ" "â–‚")

# Per-agent spinner face frames â€” {L} and {R} are eye placeholders
# CLAUDE_SPINNER_FACE_FRAME='Æ[{L} {R}]E'
# GEMINI_SPINNER_FACE_FRAME='Ê•{L}á´¥{R}Ê”'
# CODEX_SPINNER_FACE_FRAME='à¸…^{L}ï»Œ{R}^à¸…'
# OPENCODE_SPINNER_FACE_FRAME='({L}-{R})'


# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘  SECTION 5: ADVANCED SETTINGS                                            â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Mode-Aware Processing Colors â€” subtle color shift based on permission mode
#   When enabled, the processing background shifts based on Claude Code's mode:
#     plan            â†’ olive/yellow-green tinge (thinking mode)
#     acceptEdits     â†’ barely warmer (auto-approve edits)
#     bypassPermissions â†’ reddish danger tinge
# ENABLE_MODE_AWARE_PROCESSING="true"

# TrueColor Mode Override â€” behavior for TrueColor terminals
#   TrueColor terminals (Ghostty, iTerm2, etc.) have their own color schemes.
#   This controls how TAVS behaves when ENABLE_LIGHT_DARK_SWITCHING="true":
#     "off"   (default) - Skip auto-detect, always use dark
#     "muted" - Allow switching with reduced contrast
#     "full"  - Allow switching with regular colors
# TRUECOLOR_MODE_OVERRIDE="off"

# Bell/Notification Settings
# ENABLE_BELL_PERMISSION="true"     # Bell on permission requests
# ENABLE_BELL_COMPLETE="false"      # Bell on task completion
# ENABLE_BELL_PROCESSING="false"    # Bell on processing start
# ENABLE_BELL_COMPACTING="false"    # Bell on context compaction

# Feature Toggles â€” disable specific states
# ENABLE_BACKGROUND_CHANGE="true"
# ENABLE_TITLE_PREFIX="true"
# ENABLE_PROCESSING="true"
# ENABLE_PERMISSION="true"
# ENABLE_COMPLETE="true"
# ENABLE_IDLE="true"
# ENABLE_COMPACTING="true"

# Idle Timer Configuration
# ENABLE_STAGE_INDICATORS="true"
# STAGE_DURATIONS=(60 30 30 30 30 30 30)
# IDLE_CHECK_INTERVAL=15

# Dynamic Mode Settings (when THEME_MODE="dynamic")
# HUE_PROCESSING=30
# HUE_PERMISSION=0
# HUE_COMPLETE=120
# HUE_IDLE=270
# HUE_COMPACTING=180
# DYNAMIC_QUERY_TIMEOUT="0.1"
# DYNAMIC_DISABLE_SSH="true"

# Debug Logging
# DEBUG_ALL="0"
# IDLE_DEBUG="0"

# State Grace Period (ms) â€” debounce rapid state changes
# STATE_GRACE_PERIOD_MS=400


# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘  SECTION 6: PER-AGENT OVERRIDES                                          â•‘
# â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
# â•‘  Override any default setting for a specific agent.                       â•‘
# â•‘  Prefix: CLAUDE_, GEMINI_, CODEX_, OPENCODE_, UNKNOWN_                   â•‘
# â•‘  Example: CLAUDE_DARK_PROCESSING="#473D2F"                               â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# â”€â”€ Default Colors (fallback when agent has no specific colors) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# Dark Mode
# DEFAULT_DARK_BASE="#303446"
# DEFAULT_DARK_PROCESSING="#3d3b42"
# DEFAULT_DARK_PERMISSION="#3d3440"
# DEFAULT_DARK_COMPLETE="#374539"
# DEFAULT_DARK_IDLE="#3d3850"
# DEFAULT_DARK_COMPACTING="#334545"

# Light Mode
# DEFAULT_LIGHT_BASE="#eff1f5"
# DEFAULT_LIGHT_PROCESSING="#f5e6dc"
# DEFAULT_LIGHT_PERMISSION="#f5dde0"
# DEFAULT_LIGHT_COMPLETE="#e5f0e5"
# DEFAULT_LIGHT_IDLE="#ebe5f5"
# DEFAULT_LIGHT_COMPACTING="#e0f0f0"

# â”€â”€ Claude Code â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# CLAUDE_AGENT_NAME="Claude Code"

# Colors - Dark Mode
# CLAUDE_DARK_BASE="#2E3440"
# CLAUDE_DARK_PROCESSING="#473D2F"
# CLAUDE_DARK_PERMISSION="#4A2021"
# CLAUDE_DARK_COMPLETE="#473046"
# CLAUDE_DARK_IDLE="#443147"
# CLAUDE_DARK_COMPACTING="#2B4645"

# Colors - Light Mode
# CLAUDE_LIGHT_BASE="#ECEFF4"
# CLAUDE_LIGHT_PROCESSING="#F5E0D0"
# CLAUDE_LIGHT_PERMISSION="#F5D0D0"
# CLAUDE_LIGHT_COMPLETE="#E8E0F0"
# CLAUDE_LIGHT_IDLE="#E8E0F0"
# CLAUDE_LIGHT_COMPACTING="#D8F0F0"

# Mode-aware processing colors
# CLAUDE_DARK_PROCESSING_PLAN="#48432E"
# CLAUDE_DARK_PROCESSING_ACCEPT="#493D2D"
# CLAUDE_DARK_PROCESSING_BYPASS="#4B312A"

# Faces â€” 6 variants per state (one picked randomly each trigger)
# CLAUDE_FACES_PROCESSING=('Æ[â€¢ â€¢]E' 'Æ[â€¢ â—•]E' 'Æ[â–  â– ]E' 'Æ[â—” â—”]E' 'Æ[ï½¡ ï½¡]E' 'Æ[. .]E')
# CLAUDE_FACES_PERMISSION=('Æ[Â° Â°]E' 'Æ[â—‹ â—‹]E' 'Æ[â–¡ â–¡]E' 'Æ[Ê˜ Ê˜]E' 'Æ[Õ Õ]E' 'Æ[o o]E')
# CLAUDE_FACES_COMPLETE=('Æ[âœ¦ âœ¦]E' 'Æ[â˜… â˜…]E' 'Æ[âœ§ âœ§]E' 'Æ[â€ â€]E' 'Æ[âœ¿ âœ¿]E' 'Æ[* *]E')
# CLAUDE_FACES_COMPACTING=('Æ[@ @]E' 'Æ[â— â—]E' 'Æ[â–£ â–£]E' 'Æ[Ã— Ã—]E' 'Æ[ï¼  ï¼ ]E' 'Æ[@ @]E')
# CLAUDE_FACES_SUBAGENT=('Æ[â‡† â‡†]E')
# CLAUDE_FACES_TOOL_ERROR=('Æ[âœ• âœ•]E')
# CLAUDE_FACES_RESET=('Æ[â€¢ â€¢]E')
# CLAUDE_FACES_IDLE_0=('Æ[â—• â—•]E')
# CLAUDE_FACES_IDLE_1=('Æ[â€¢ â€¢]E')
# CLAUDE_FACES_IDLE_2=('Æ[á´— á´—]E')
# CLAUDE_FACES_IDLE_3=('Æ[Â¬ Â¬]E')
# CLAUDE_FACES_IDLE_4=('Æ[- -]E zZ')
# CLAUDE_FACES_IDLE_5=('Æ[= =]E á¶»á¶»')

# â”€â”€ Gemini CLI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# GEMINI_AGENT_NAME="Gemini CLI"

# Colors - Dark Mode
# GEMINI_DARK_BASE="#2B3540"
# GEMINI_DARK_PROCESSING="#3D4A47"
# GEMINI_DARK_PERMISSION="#4A2028"
# GEMINI_DARK_COMPLETE="#304640"
# GEMINI_DARK_IDLE="#3B3F4A"
# GEMINI_DARK_COMPACTING="#264548"

# Colors - Light Mode
# GEMINI_LIGHT_BASE="#EBF0F4"
# GEMINI_LIGHT_PROCESSING="#D8E8E0"
# GEMINI_LIGHT_PERMISSION="#F0D0D8"
# GEMINI_LIGHT_COMPLETE="#D0F0E8"
# GEMINI_LIGHT_IDLE="#D8E0F5"
# GEMINI_LIGHT_COMPACTING="#D0F0F5"

# Faces â€” Bear style
# GEMINI_FACES_PROCESSING=('Ê•â€¢á´¥â€¢Ê”')
# GEMINI_FACES_PERMISSION=('Ê•à¹á´¥à¹Ê”')
# GEMINI_FACES_COMPLETE=('Ê•â™¥á´¥â™¥Ê”')
# GEMINI_FACES_COMPACTING=('Ê•â€¢_â€¢Ê”')
# GEMINI_FACES_RESET=('Ê•-á´¥-Ê”')
# GEMINI_FACES_IDLE_0=('Ê•â€¢á´¥â€¢Ê”')

# â”€â”€ Codex CLI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# CODEX_AGENT_NAME="Codex CLI"

# Colors - Dark Mode
# CODEX_DARK_BASE="#303035"
# CODEX_DARK_PROCESSING="#454035"
# CODEX_DARK_PERMISSION="#452830"
# CODEX_DARK_COMPLETE="#354538"
# CODEX_DARK_IDLE="#3A3540"
# CODEX_DARK_COMPACTING="#304040"

# Faces â€” Cat style
# CODEX_FACES_PROCESSING=('à¸…^â€¢ï»Œâ€¢^à¸…')
# CODEX_FACES_PERMISSION=('à¸…^â—‰ï»Œâ—‰^à¸…')
# CODEX_FACES_COMPLETE=('à¸…^â™¥ï»Œâ™¥^à¸…')
# CODEX_FACES_COMPACTING=('à¸…^â€¢_â€¢^à¸…')
# CODEX_FACES_RESET=('à¸…^-ï»Œ-^à¸…')

# â”€â”€ OpenCode â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# OPENCODE_AGENT_NAME="OpenCode"

# Colors - Dark Mode
# OPENCODE_DARK_BASE="#3A3530"
# OPENCODE_DARK_PROCESSING="#504030"
# OPENCODE_DARK_PERMISSION="#502520"
# OPENCODE_DARK_COMPLETE="#404538"
# OPENCODE_DARK_IDLE="#453840"
# OPENCODE_DARK_COMPACTING="#354540"

# Faces â€” Minimal kaomoji
# OPENCODE_FACES_PROCESSING=('(Â°-Â°)')
# OPENCODE_FACES_PERMISSION=('(Â°â–¡Â°)')
# OPENCODE_FACES_COMPLETE=('(^â€¿^)')
# OPENCODE_FACES_COMPACTING=('(@_@)')
# OPENCODE_FACES_RESET=('(-_-)')
